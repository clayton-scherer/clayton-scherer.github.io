{"version":3,"sources":["js/utils/pushbar.js/pushbar.js"],"names":["Pushbar","config","overlay","blur","activeBar","document","createElement","classList","add","querySelector","appendChild","mainContent","bindEvents","e","preventDefault","pushbarId","currentTarget","getAttribute","open","close","opened","keyCode","triggers","querySelectorAll","closers","forEach","trigger","addEventListener","handleOpenEvent","closer","handleCloseEvent","handleKeyEvent","String","activeBarId","pushbar","findElementById","dispatchOpen","Root","setAttribute","dispatchClose","remove","removeAttribute","Boolean","HTMLElement","contains","event","CustomEvent","bubbles","detail","dispatchEvent"],"mappings":"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","file":"pushbar.026e2708.js","sourceRoot":"..","sourcesContent":["class Pushbar {\r\n  constructor(config = { overlay: true, blur: false }) {\r\n    this.activeBar = null;\r\n    this.overlay = false;\r\n\r\n    if (config.overlay) {\r\n      this.overlay = document.createElement('div');\r\n      this.overlay.classList.add('pushbar_overlay');\r\n      document.querySelector('body').appendChild(this.overlay);\r\n    }\r\n\r\n    if (config.blur) {\r\n      const mainContent = document.querySelector('.pushbar_main_content');\r\n      if (mainContent) {\r\n        mainContent.classList.add('pushbar_blur');\r\n      }\r\n    }\r\n\r\n    this.bindEvents();\r\n  }\r\n\r\n  get opened() {\r\n    const { activeBar } = this;\r\n    return Boolean(activeBar instanceof HTMLElement && activeBar.classList.contains('opened'));\r\n  }\r\n  \r\n  get activeBarId() {\r\n    const { activeBar } = this;\r\n    return activeBar instanceof HTMLElement && activeBar.getAttribute('data-pushbar-id');\r\n  }\r\n\r\n  static dispatchOpen(pushbar) {\r\n    const event = new CustomEvent('pushbar_opening', { bubbles: true, detail: { pushbar } });\r\n    pushbar.dispatchEvent(event);\r\n  }\r\n\r\n  static dispatchClose(pushbar) {\r\n    const event = new CustomEvent('pushbar_closing', { bubbles: true, detail: { pushbar } });\r\n    pushbar.dispatchEvent(event);\r\n  }\r\n\r\n  static findElementById(pushbarId) {\r\n    return document.querySelector(`[data-pushbar-id=\"${pushbarId}\"]`);\r\n  }\r\n\r\n  handleOpenEvent(e) {\r\n    e.preventDefault();\r\n    const pushbarId = e.currentTarget.getAttribute('data-pushbar-target');\r\n    if (pushbarId) {\r\n      this.open(pushbarId);\r\n    }\r\n  }\r\n\r\n  handleCloseEvent(e) {\r\n    e.preventDefault();\r\n    this.close();\r\n  }\r\n\r\n  handleKeyEvent(e) {\r\n    if (this.opened && e.keyCode === 27) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  bindEvents() {\r\n    const triggers = document.querySelectorAll('[data-pushbar-target]');\r\n    const closers = document.querySelectorAll('[data-pushbar-close]');\r\n\r\n    triggers.forEach(trigger => trigger.addEventListener('click', e => this.handleOpenEvent(e), false));\r\n    closers.forEach(closer => closer.addEventListener('click', e => this.handleCloseEvent(e), false));\r\n\r\n    if (this.overlay) {\r\n      this.overlay.addEventListener('click', e => this.handleCloseEvent(e), false);\r\n    }\r\n    document.addEventListener('keyup', e => this.handleKeyEvent(e));\r\n  }\r\n\r\n  open(pushbarId) {\r\n    // Current bar is already opened\r\n    if (String(pushbarId) === this.activeBarId && this.opened) {\r\n      return;\r\n    }\r\n    \r\n    // Get new pushbar target\r\n    const pushbar = Pushbar.findElementById(pushbarId);\r\n\r\n    if (!pushbar) return;\r\n    \r\n    // Close active bar (if exists)\r\n    if (this.opened) {\r\n      this.close();\r\n    }\r\n    \r\n    Pushbar.dispatchOpen(pushbar);\r\n    pushbar.classList.add('opened');\r\n\r\n    const Root = document.querySelector('html');\r\n    Root.classList.add('pushbar_locked');\r\n    Root.setAttribute('pushbar', pushbarId);\r\n    this.activeBar = pushbar;\r\n  }\r\n\r\n  close() {\r\n    const { activeBar } = this;\r\n    if (!activeBar) return;\r\n    \r\n    Pushbar.dispatchClose(activeBar);\r\n    activeBar.classList.remove('opened');\r\n\r\n    const Root = document.querySelector('html');\r\n    Root.classList.remove('pushbar_locked');\r\n    Root.removeAttribute('pushbar');\r\n    \r\n    this.activeBar = null;\r\n  }\r\n}\r\n\r\n"]}